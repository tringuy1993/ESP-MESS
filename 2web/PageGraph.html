<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Data</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="./lib/uPlot/uPlot.min.css">
	</head>
	<body>
		<script src="./lib/uPlot/uPlot.iife.min.js"></script>
		<script src="./js/1DataModel/UPlotOption.js"></script>
		<script src="./js/2Services/DataGenerator.js"></script>
		<script type="module" src="./js/3Modules/ModPlot.js"></script>

		<script>
			// const plot1 = new ModPlot()
			const dataGen = new DataGenerator()

			async function plotData() {
				let data2 = await dataGen.requestMockData()
				if (data2.length > 0) u3.setData(data2)
			}

			let uPlotOPtion = new uPlotOption('LUX', 'lux', 'red', 1200, 600)
			let opts = uPlotOPtion.getOptions()
			let u3 = new uPlot(opts, [[],[],[]], document.body)
			plotData()
			
			// Update data every 1 minute
			let interval = setInterval(plotData, 200)

			// Clear the interval after 10 minutes to prevent memory leaks and unecessary operations.
			setTimeout(()=>{
				clearInterval(interval)
			}, 300000)

			// plot1.makePlot()
		</script>
	</body>
</html>